<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to add a new lidar detector algorithm &mdash; Apollo Auto alpha 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/cyber/doxy-docs/source/main_stylesheet.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/tabs.js"></script>
        <script src="../../_static/translations.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="如何添加新的lidar检测算法" href="how_to_add_a_new_lidar_detector_algorithm_cn.html" />
    <link rel="prev" title="如何添加新的fusion融合系统" href="how_to_add_a_new_fusion_system_cn.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: skyblue" >
            <a href="../../index.html" class="icon icon-home"> Apollo Auto
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Apollo Auto 自述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Apollo Auto 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cyber/doxy-docs/source/index.html">cyber 文档</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: skyblue" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apollo Auto</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>How to add a new lidar detector algorithm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/howto/how_to_add_a_new_lidar_detector_algorithm.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="how-to-add-a-new-lidar-detector-algorithm">
<h1>How to add a new lidar detector algorithm<a class="headerlink" href="#how-to-add-a-new-lidar-detector-algorithm" title="永久链接至标题"></a></h1>
<p>The processing flow of lidar perception module is shown below:
<img alt="" src="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/images/lidar_perception_data_flow.png" /></p>
<p>The detector algorithm introduced by this document is located at Detection Component listed below. Current architecture of Detection Component is shown：
<img alt="lidar detection high-level" src="../../_images/lidar_detection_1.png" />
<img alt="lidar detection" src="../../_images/lidar_detection_2.png" /></p>
<p>As we can see from above structure, lidar detector algorithm, such as PointPillars, is the derived class of <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code> which acts as a abstract class member of <code class="docutils literal notranslate"><span class="pre">base_lidar_obstacle_detection</span></code> located in Detection Component. Next, We will introduce how to add a new lidar detector algorithm.</p>
<p>Apollo has provided two lidar detector algorithms – PointPillars and CNN （NCut will no longer be updated）. Both of them could be easily changed or replaced by other algorithms. The input of algorithm should be original points cloud data, while the output should be obastacle object data. This document will introduce how to add a new lidar detector algorithm, the basic task sequence is listed below：</p>
<ol class="simple">
<li><p>Define a class that inherits <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code></p></li>
<li><p>Implement the class <code class="docutils literal notranslate"><span class="pre">NewLidarDetector</span></code></p></li>
<li><p>Add config and param proto file for <code class="docutils literal notranslate"><span class="pre">NewLidarDetector</span></code></p></li>
<li><p>Update lidar_obstacle_detection.conf</p></li>
</ol>
<p>The steps are elaborated below for better understanding:</p>
<section id="define-a-class-that-inherits-base-lidar-detector">
<h2>Define a class that inherits <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code><a class="headerlink" href="#define-a-class-that-inherits-base-lidar-detector" title="永久链接至标题"></a></h2>
<p>All the lidar detector algorithms shall inherit <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code>，which defines a set of interfaces. Here is an example of the detector implementation:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">apollo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">perception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">lidar</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="k">class</span> <span class="nc">NewLidarDetector</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">BaseLidarDetector</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="n">NewLidarDetector</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">NewLidarDetector</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="nf">Init</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">LidarDetectorInitOptions</span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LidarDetectorInitOptions</span><span class="p">())</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="nf">Detect</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">LidarDetectorOptions</span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">LidarFrame</span><span class="o">*</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>

<span class="p">};</span><span class="w">  </span><span class="c1">// class NewLidarDetector</span>

<span class="p">}</span><span class="w">  </span><span class="c1">// namespace lidar</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// namespace perception</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// namespace apollo</span>
</pre></div>
</div>
<p>The function signature of <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code> is pre-defined：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">LidarDetectorInitOptions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">sensor_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;velodyne64&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">LidarDetectorOptions</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">LidarFrame</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// point cloud</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">AttributePointCloud</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">PointF</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">cloud</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// world point cloud</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">AttributePointCloud</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">PointD</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">world_cloud</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// timestamp</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// lidar to world pose</span>
<span class="w">  </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Affine3d</span><span class="w"> </span><span class="n">lidar2world_pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Affine3d</span><span class="o">::</span><span class="n">Identity</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="c1">// lidar to world pose</span>
<span class="w">  </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Affine3d</span><span class="w"> </span><span class="n">novatel2world_pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Affine3d</span><span class="o">::</span><span class="n">Identity</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="c1">// hdmap struct</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">HdmapStruct</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hdmap_struct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// segmented objects</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">segmented_objects</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// tracked objects</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">tracked_objects</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// point cloud roi indices</span>
<span class="w">  </span><span class="n">base</span><span class="o">::</span><span class="n">PointIndices</span><span class="w"> </span><span class="n">roi_indices</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// point cloud non ground indices</span>
<span class="w">  </span><span class="n">base</span><span class="o">::</span><span class="n">PointIndices</span><span class="w"> </span><span class="n">non_ground_indices</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// secondary segmentor indices</span>
<span class="w">  </span><span class="n">base</span><span class="o">::</span><span class="n">PointIndices</span><span class="w"> </span><span class="n">secondary_indices</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// sensor info</span>
<span class="w">  </span><span class="n">base</span><span class="o">::</span><span class="n">SensorInfo</span><span class="w"> </span><span class="n">sensor_info</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// reserve string</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">reserve</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">Reset</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">FilterPointCloud</span><span class="p">(</span><span class="n">base</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">PointF</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">filtered_cloud</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">indices</span><span class="p">);</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="implement-the-class-newlidardetector">
<h2>Implement the class <code class="docutils literal notranslate"><span class="pre">NewLidarDetector</span></code><a class="headerlink" href="#implement-the-class-newlidardetector" title="永久链接至标题"></a></h2>
<p>To ensure the new detector could function properly, <code class="docutils literal notranslate"><span class="pre">NewLidarDetector</span></code> should at least override the interface Init(), Detect(), Name() defined in <code class="docutils literal notranslate"><span class="pre">base_lidar_detector</span></code>. Init() is resposible for config loading, class member initialization, etc. And Detect() will implement the basic logic of algorithm. A concrete <code class="docutils literal notranslate"><span class="pre">NewLidarDetector.cc</span></code> example is shown：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">apollo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">perception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">namespace</span><span class="w"> </span><span class="nn">lidar</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="kt">bool</span><span class="w"> </span><span class="nf">NewLidarDetector::Init</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">LidarDetectorInitOptions</span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    Initialization of your detector</span>
<span class="cm">    */</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">bool</span><span class="w"> </span><span class="nf">NewLidarDetector::Detect</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">LidarDetectorOptions</span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">LidarFrame</span><span class="o">*</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    Implementation of your detector</span>
<span class="cm">    */</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">NewLidarDetector::Name</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    Return your detector&#39;s name</span>
<span class="cm">    */</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">PERCEPTION_REGISTER_LIDARDETECTOR</span><span class="p">(</span><span class="n">NewLidarDetector</span><span class="p">);</span><span class="w"> </span><span class="c1">//register the new detector</span>

<span class="p">}</span><span class="w">  </span><span class="c1">// namespace lidar</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// namespace perception</span>
<span class="p">}</span><span class="w">  </span><span class="c1">// namespace apollo</span>
</pre></div>
</div>
</section>
<section id="add-config-and-param-proto-file-for-newlidardetector">
<h2>Add config and param proto file for <code class="docutils literal notranslate"><span class="pre">NewLidarDetector</span></code><a class="headerlink" href="#add-config-and-param-proto-file-for-newlidardetector" title="永久链接至标题"></a></h2>
<p>Follow the following steps to add config and param proto file for the new detector:</p>
<ol>
<li><p>Define a <code class="docutils literal notranslate"><span class="pre">proto</span></code> for the new detector configurations according to the requirements of your algorithm. As a reference， you can found and follow the <code class="docutils literal notranslate"><span class="pre">proto</span></code> definition of <code class="docutils literal notranslate"><span class="pre">cnn_segmentation</span></code> at <code class="docutils literal notranslate"><span class="pre">modules/perception/lidar/lib/detector/cnn_segmentation/proto/cnnseg_config.proto</span></code></p></li>
<li><p>Once finishing your <code class="docutils literal notranslate"><span class="pre">proto</span></code>, for example <code class="docutils literal notranslate"><span class="pre">newlidardetector_config.proto</span></code>, add the following content:</p>
<div class="highlight-protobuf notranslate"><div class="highlight"><pre><span></span><span class="k">syntax</span> <span class="o">=</span> <span class="s">&quot;proto2&quot;</span><span class="p">;</span>
<span class="kn">package</span> <span class="nn">apollo</span><span class="o">.</span><span class="n">perception.lidar</span><span class="p">;</span>

<span class="kd">message</span> <span class="nc">NewLidarDetectorConfig</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="na">parameter1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int32</span> <span class="na">parameter2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Define a <code class="docutils literal notranslate"><span class="pre">proto</span></code> for the new detector parameters according to the requirements of your algorithm. Also, as a reference, you can found and follow the <code class="docutils literal notranslate"><span class="pre">proto</span></code> definition of <code class="docutils literal notranslate"><span class="pre">cnn_segmentation</span></code> at <code class="docutils literal notranslate"><span class="pre">modules/perception/lidar/lib/detector/cnn_segmentation/proto/cnnseg_param.proto</span></code>. Similarly, add the following content once finished:</p>
<div class="highlight-protobuf notranslate"><div class="highlight"><pre><span></span><span class="k">syntax</span> <span class="o">=</span> <span class="s">&quot;proto2&quot;</span><span class="p">;</span>
<span class="kn">package</span> <span class="nn">apollo</span><span class="o">.</span><span class="n">perception.lidar</span><span class="p">;</span>

<span class="c1">//your parameters</span>
</pre></div>
</div>
</li>
<li><p>Refer to <code class="docutils literal notranslate"><span class="pre">modules/perception/production/conf/perception/lidar/config_manager.config</span></code> and add your detector path:</p>
<div class="highlight-protobuf notranslate"><div class="highlight"><pre><span></span><span class="n">model_config_path</span><span class="o">:</span> <span class="s">&quot;./conf/perception/lidar/modules/newlidardetector_config.config&quot;</span>
</pre></div>
</div>
</li>
<li><p>Refer to the <code class="docutils literal notranslate"><span class="pre">modules/cnnseg.config</span></code> in the same folder and create <code class="docutils literal notranslate"><span class="pre">newlidardetector.config</span></code>:</p>
<div class="highlight-protobuf notranslate"><div class="highlight"><pre><span></span><span class="n">model_configs</span> <span class="p">{</span>
    <span class="n">name</span><span class="o">:</span> <span class="s">&quot;NewLidarDetector&quot;</span>
    <span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span>
    <span class="n">string_params</span> <span class="p">{</span>
        <span class="n">name</span><span class="o">:</span> <span class="s">&quot;root_path&quot;</span>
        <span class="n">value</span><span class="o">:</span> <span class="s">&quot;./data/perception/lidar/models/newlidardetector&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Refer to <code class="docutils literal notranslate"><span class="pre">cnnseg</span></code> and create <code class="docutils literal notranslate"><span class="pre">newlidardetector</span></code> folder at <code class="docutils literal notranslate"><span class="pre">modules/perception/production/data/perception/lidar/models/</span></code>. Add <code class="docutils literal notranslate"><span class="pre">.conf</span></code> files for different sensors：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Note：The &quot;*.conf&quot; and &quot;*param.conf&quot; file should have the same structure with the &quot;proto&quot; files defined in step 1，2，3.
</pre></div>
</div>
</li>
</ol>
</section>
<section id="update-lidar-obstacle-detection-conf">
<h2>Update lidar_obstacle_detection.conf<a class="headerlink" href="#update-lidar-obstacle-detection-conf" title="永久链接至标题"></a></h2>
<p>To use your new lidar detector algorithm in Apollo，you need to modify the value of <code class="docutils literal notranslate"><span class="pre">detector</span></code> to your detector’s name in <code class="docutils literal notranslate"><span class="pre">lidar_obstacle_detection.conf</span></code> located in corresponding sensor folder in <code class="docutils literal notranslate"><span class="pre">modules/perception/production/data/perception/lidar/models/lidar_obstacle_pipline</span></code></p>
<p>Once you finished the above modifications, you new detector should take effect in Apollo.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="how_to_add_a_new_fusion_system_cn.html" class="btn btn-neutral float-left" title="如何添加新的fusion融合系统" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="how_to_add_a_new_lidar_detector_algorithm_cn.html" class="btn btn-neutral float-right" title="如何添加新的lidar检测算法" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, xinetzone.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>