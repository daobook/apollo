<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to Run Perception Module on Your Local Computer &mdash; Apollo Auto alpha 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/cyber/doxy-docs/source/main_stylesheet.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/tabs.js"></script>
        <script src="../../_static/translations.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="How to Save and Load Apollo Docker Images" href="how_to_save_and_load_docker_image.html" />
    <link rel="prev" title="How to run the Map Data Verification Tool" href="how_to_run_map_verification_tool.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: skyblue" >
            <a href="../../index.html" class="icon icon-home"> Apollo Auto
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Apollo Auto 自述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Apollo Auto 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cyber/doxy-docs/source/index.html">cyber 文档</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: skyblue" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apollo Auto</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>How to Run Perception Module on Your Local Computer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/howto/how_to_run_perception_module_on_your_local_computer.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="how-to-run-perception-module-on-your-local-computer">
<h1>How to Run Perception Module on Your Local Computer<a class="headerlink" href="#how-to-run-perception-module-on-your-local-computer" title="永久链接至标题"></a></h1>
<p>The perception module requires Nvidia GPU and CUDA installed to run the perception algorithms with Caffe. We have already installed the CUDA and Caffe libraries in the released docker. However, the Nvidia GPU driver is not installed in the released dev docker image. To run the perception module with CUDA acceleration, we suggest to install the exactly same version of Nvidia driver in the docker as the one installed in your host machine, and build Apollo with GPU option.</p>
<p>We provide a step-by-step instruction on running perception module with Nvidia GPU as below:</p>
<ol>
<li><p>Get into the docker container via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$APOLLO_HOME</span>/docker/scripts/dev_start.sh
<span class="nv">$APOLLO_HOME</span>/docker/scripts/dev_into.sh
</pre></div>
</div>
</li>
<li><p>Build Apollo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./apollo.sh build_opt_gpu
</pre></div>
</div>
</li>
<li><p>Run <a class="reference external" href="http://bootstrap.sh">bootstrap.sh</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bootstrap.sh
</pre></div>
</div>
</li>
<li><p>Launch Dreamview from your web browser by typing following address
<a class="reference external" href="http://localhost:8888/">http://localhost:8888/</a></p></li>
<li><p>Select your car and map using the dropdowm options in the top right corner in Dreamview</p></li>
<li><p>Select the transform button in Dreamview or type the following command in your terminal</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cyber_launch start /apollo/modules/transform/launch/static_transform.launch
</pre></div>
</div>
</li>
<li><p>If the image is compressed, launch the image decompression module</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cyber_launch</span> <span class="n">start</span> <span class="n">modules</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">image_decompress</span><span class="o">/</span><span class="n">launch</span><span class="o">/</span><span class="n">image_decompress</span><span class="o">.</span><span class="n">launch</span>
</pre></div>
</div>
</li>
<li><p>Launch the perception modules</p>
<ul class="simple">
<li><p>If you want to launch all modules</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cyber_launch</span> <span class="n">start</span> <span class="o">/</span><span class="n">apollo</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">perception</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">launch</span><span class="o">/</span><span class="n">perception_all</span><span class="o">.</span><span class="n">launch</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If you want to test camera-based obstacle and lane detection</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cyber_launch</span> <span class="n">start</span> <span class="o">/</span><span class="n">apollo</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">perception</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">launch</span><span class="o">/</span><span class="n">perception_camera</span><span class="o">.</span><span class="n">launch</span>
</pre></div>
</div>
<p>If you want to visualize camera-based results overlaid on the captured image and in bird view, mark <code class="docutils literal notranslate"><span class="pre">enable_visualization:</span> <span class="pre">true</span></code> in <code class="docutils literal notranslate"><span class="pre">‘modules/perception/production/conf/perception/camera/fusion_camera_detection_component.pb.txt</span></code> befor executing the above command. It will pop up when you play recorded data in point 9
Also, If you want to enable CIPO, add ‘enable_cipv: true’ as a new line in the same file</p>
<ul class="simple">
<li><p>If you want to test lane detection alone use</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mainboard</span> <span class="o">-</span><span class="n">d</span> <span class="o">./</span><span class="n">modules</span><span class="o">/</span><span class="n">perception</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">dag</span><span class="o">/</span><span class="n">dag_streaming_perception_lane</span><span class="o">.</span><span class="n">dag</span>
</pre></div>
</div>
<p>If you want to visualize lane results overlaid on the captured image and in bird view, mark <code class="docutils literal notranslate"><span class="pre">enable_visualization:</span> <span class="pre">true</span></code> in <code class="docutils literal notranslate"><span class="pre">modules/perception/production/conf/perception/camera/lane_detection_component.config</span></code> before executing the above command. It will pop up when you play recorded data in point 9</p>
<ul class="simple">
<li><p>If you want to test traffic light detection module alone use</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cyber_launch</span> <span class="n">start</span> <span class="o">/</span><span class="n">apollo</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">perception</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">launch</span><span class="o">/</span><span class="n">perception_trafficlight</span><span class="o">.</span><span class="n">launch</span>
</pre></div>
</div>
<p>If you want to visualize the traffic light detection results overlaid on the captured image, mark <code class="docutils literal notranslate"><span class="pre">—start_visualizer=true</span></code> in <code class="docutils literal notranslate"><span class="pre">apollo/modules/perception/production/conf/perception/perception_common.flag</span></code> before executing the above command. It will pop up when you play recorded data in point 9</p>
</li>
<li><p>Play your recorded bag</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cyber_recorder</span> <span class="n">play</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">apollo</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">bag</span><span class="o">/</span><span class="n">anybag</span> <span class="o">-</span><span class="n">r</span> <span class="mf">0.2</span>
</pre></div>
</div>
</li>
</ol>
<p>Please note that the Nvidia driver should be installed appropriately even if the perception module is running in Caffe CPU_ONLY mode (i.e., using <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">build</span></code> or <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">build_opt</span></code> to build the perception module). Please see the detailed instruction of perception module in <a class="reference internal" href="../../modules/perception/README.html"><span class="doc std std-doc">the perception README</span></a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="how_to_run_map_verification_tool.html" class="btn btn-neutral float-left" title="How to run the Map Data Verification Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="how_to_save_and_load_docker_image.html" class="btn btn-neutral float-right" title="How to Save and Load Apollo Docker Images" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, xinetzone.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>