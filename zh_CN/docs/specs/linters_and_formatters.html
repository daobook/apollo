<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Linters and Formatters used in Apollo 6.0 &mdash; Apollo Auto alpha 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/cyber/doxy-docs/source/main_stylesheet.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/tabs.js"></script>
        <script src="../../_static/translations.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Perception" href="perception_apollo_2.5.html" />
    <link rel="prev" title="Dynamic Model - Control-in-loop Simulation" href="dynamic_model.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: skyblue" >
            <a href="../../index.html" class="icon icon-home"> Apollo Auto
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Apollo Auto 自述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Apollo Auto 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cyber/doxy-docs/source/index.html">cyber 文档</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: skyblue" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apollo Auto</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Linters and Formatters used in Apollo 6.0</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/specs/linters_and_formatters.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="linters-and-formatters-used-in-apollo-6-0">
<h1>Linters and Formatters used in Apollo 6.0<a class="headerlink" href="#linters-and-formatters-used-in-apollo-6-0" title="永久链接至标题"></a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Programs</span> <span class="n">should</span> <span class="n">be</span> <span class="n">written</span> <span class="k">for</span> <span class="n">people</span> <span class="n">to</span> <span class="n">read</span><span class="p">,</span> <span class="ow">and</span>
<span class="n">only</span> <span class="n">incidentally</span> <span class="k">for</span> <span class="n">machines</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>

                         <span class="o">--</span> <span class="n">Harold</span> <span class="n">Abelson</span>
</pre></div>
</div>
<p>A great project is made out of consistent code. In the ideal world, you should
not be able to tell who wrote a certain line of the code for the project. Modern
linters and formatters help to close this gap by specifying a simple set of
rules to be enforced on all developers working on the project. Such tools also
stimulate developers to write better code by pointing out common mistakes and
introducing good programming practices.</p>
<p>Generally, linters are used for catching errors, whereas formatters are used to
fix coding style problems.</p>
<p>In this article, we will describe briefly the various linters and formatters
used in Apollo.</p>
<section id="apollo-coding-style">
<h2>Apollo Coding Style<a class="headerlink" href="#apollo-coding-style" title="永久链接至标题"></a></h2>
<p>As you may already know, Apollo adopted Google coding style for C/C++ and Python
programs. You can refer to
<a class="reference external" href="https://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a> and
<a class="reference external" href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>
for full text of their specifications.</p>
</section>
<section id="linters-in-apollo">
<h2>Linters in Apollo<a class="headerlink" href="#linters-in-apollo" title="永久链接至标题"></a></h2>
<p>To enforce that everyone conform to Apollo coding style, the following linters
are provided for developers to check style issues.</p>
<p><strong>Note:</strong></p>
<blockquote>
<div><p>As the time of this writing, Apollo CI system enforced style check on C++
files only. We hope that linters for other languages will be online in the
near future.</p>
</div></blockquote>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Linters</p></th>
<th class="text-align:center head"><p>Source Extensions</p></th>
<th class="text-align:left head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>cpplint</p></td>
<td class="text-align:center"><p>.h/.c/.hpp/.cpp/.hh/.cc/.hxx/.cxx/.cu</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –cpp</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>flake8</p></td>
<td class="text-align:center"><p>.py</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –py</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>shellcheck</p></td>
<td class="text-align:center"><p>.sh/.bash/.bashrc</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –sh</p></td>
</tr>
</tbody>
</table>
<p>To make sure your code conforms to Apollo coding style, you can use
<code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">lint</span></code> to find any possible style problems and fix them manually.</p>
</section>
<section id="formatters-in-apollo">
<h2>Formatters in Apollo<a class="headerlink" href="#formatters-in-apollo" title="永久链接至标题"></a></h2>
<p>To help ease your life with Apollo coding style, various formatters are
pre-installed into Apollo Docker image, to help you auto-format your code, and
avoid common mistakes when writing code.</p>
<p>The following table lists the formatters currently integrated into Apollo,
covering C/C++, Python, Bash, Bazel, Markdown, JSON and YAML files.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Formatters</p></th>
<th class="text-align:center head"><p>Source Extensions</p></th>
<th class="text-align:center head"><p>Usage</p></th>
<th class="text-align:center head"><p>Formatter Config</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>clang-format</p></td>
<td class="text-align:center"><p>.h/.c/.hpp/.cpp/.hh/.cc/.hxx/.cxx/.cu/.proto</p></td>
<td class="text-align:center"><p>./apollo.sh format -c &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.clang-format</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>autopep8</p></td>
<td class="text-align:center"><p>.py</p></td>
<td class="text-align:center"><p>./apollo.sh format -p &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>tox.ini</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>buildifier</p></td>
<td class="text-align:center"><p>.BUILD/.bzl/.bazel/WORKSPACE/BUILD</p></td>
<td class="text-align:center"><p>./apollo.sh format -b &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>N/A</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>shfmt</p></td>
<td class="text-align:center"><p>.sh/.bash/.bashrc</p></td>
<td class="text-align:center"><p>./apollo.sh format -s &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.editorconfig</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>prettier</p></td>
<td class="text-align:center"><p>.md/.json/.yml</p></td>
<td class="text-align:center"><p>./apollo.sh format -m &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.prettier.json</p></td>
</tr>
</tbody>
</table>
<p>For easy use, you can format all files with types listed above with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">apollo</span><span class="o">.</span><span class="n">sh</span> <span class="nb">format</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="ow">or</span><span class="o">/</span><span class="n">files</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">apollo</span><span class="o">.</span><span class="n">sh</span> <span class="nb">format</span> <span class="n">WORKSPACE</span> <span class="n">third_party</span><span class="o">/</span><span class="n">BUILD</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span>
</pre></div>
</div>
<p>which will auto-format Bazel <code class="docutils literal notranslate"><span class="pre">WORKSPACE</span></code> file under <code class="docutils literal notranslate"><span class="pre">$APOLLO_ROOT_DIR</span></code>,
<code class="docutils literal notranslate"><span class="pre">third_party/BUILD</span></code> file, and all the files under the <code class="docutils literal notranslate"><span class="pre">./scripts</span></code> directory.</p>
<p>Note:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">format</span></code> can also work outside Docker if relavant tools installed
properly.</p>
</div></blockquote>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="永久链接至标题"></a></h2>
<p>To summarize,</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">lint</span></code> to check coding style errors.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">format</span></code> to auto-format your code.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dynamic_model.html" class="btn btn-neutral float-left" title="Dynamic Model - Control-in-loop Simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="perception_apollo_2.5.html" class="btn btn-neutral float-right" title="Perception" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, xinetzone.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>